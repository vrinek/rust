<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `c_str_to_bytes` fn in crate `std`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, c_str_to_bytes">

    <title>std::ffi::c_str_to_bytes - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../main.css">

    <link rel="shortcut icon" href="http://www.rust-lang.org/favicon.ico">
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        <a href='../../std/index.html'><img src='http://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png' alt='' width='100'></a>
        <p class='location'><a href='../index.html'>std</a>::<wbr><a href='index.html'>ffi</a></p><div class='block struct'><h2>Structs</h2><a class='struct ' href='struct.CString.html' title='A type representing a C-compatible string'>CString</a><a class='struct ' href='struct.OsStr.html' title='Slices into OS strings.'>OsStr</a><a class='struct ' href='struct.OsString.html' title='Owned, mutable OS strings.'>OsString</a></div><div class='block trait'><h2>Traits</h2><a class='trait ' href='trait.AsOsStr.html' title='Freely convertible to an `&amp;OsStr` slice.'>AsOsStr</a></div><div class='block fn'><h2>Functions</h2><a class='fn current' href='fn.c_str_to_bytes.html' title='Interpret a C string as a byte slice.'>c_str_to_bytes</a><a class='fn ' href='fn.c_str_to_bytes_with_nul.html' title='Interpret a C string as a byte slice with the nul terminator.'>c_str_to_bytes_with_nul</a></div>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content fn">
<h1 class='fqn'><span class='in-band'>Function <a href='../index.html'>std</a>::<wbr><a href='index.html'>ffi</a>::<wbr><a class='fn' href=''>c_str_to_bytes</a><wbr><a class='stability Unstable' title='module just underwent fairly large reorganization and the dust still needs to settle'>Unstable</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="collapse-all" href="#">[-]
            </a>&nbsp;<a id="expand-all" href="#">[+]</a>
        </span><a id='src-8382' href='../../src/std/ffi/c_str.rs.html#163-166'>[src]</a></span></h1>
<pre class='rust fn'>pub unsafe fn c_str_to_bytes&lt;'a&gt;(raw: &amp;'a *const <a class='type' href='../../libc/types/os/arch/c95/type.c_char.html' title='libc::types::os::arch::c95::c_char'>c_char</a>) -&gt; <a href='../primitive.slice.html'>&amp;'a [</a><a href='../primitive.u8.html'>u8</a><a href='../primitive.slice.html'>]</a></pre><div class='docblock'><p>Interpret a C string as a byte slice.</p>

<p>This function will calculate the length of the C string provided, and it
will then return a corresponding slice for the contents of the C string not
including the nul terminator.</p>

<p>This function will tie the lifetime of the returned slice to the lifetime of
the pointer provided. This is done to help prevent the slice from escaping
the lifetime of the pointer itself. If a longer lifetime is needed, then
<code>mem::copy_lifetime</code> should be used.</p>

<p>This function is unsafe because there is no guarantee of the validity of the
pointer <code>raw</code> or a guarantee that a nul terminator will be found.</p>

<h1 id="example" class='section-header'><a
                           href="#example">Example</a></h1><span class='rusttest'>extern crate libc;
fn main() {
use std::ffi;
use std::str;
use libc;

extern {
    fn my_string() -&gt; *const libc::c_char;
}

unsafe {
    let to_print = my_string();
    let slice = ffi::c_str_to_bytes(&amp;to_print);
    println!(&quot;string returned: {}&quot;, str::from_utf8(slice).unwrap());
}
}</span><pre id='rust-example-rendered' class='rust '>
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>ffi</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>str</span>;
<span class='kw'>use</span> <span class='ident'>libc</span>;

<span class='kw'>extern</span> {
    <span class='kw'>fn</span> <span class='ident'>my_string</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>libc</span>::<span class='ident'>c_char</span>;
}

<span class='kw'>unsafe</span> {
    <span class='kw'>let</span> <span class='ident'>to_print</span> <span class='op'>=</span> <span class='ident'>my_string</span>();
    <span class='kw'>let</span> <span class='ident'>slice</span> <span class='op'>=</span> <span class='ident'>ffi</span>::<span class='ident'>c_str_to_bytes</span>(<span class='kw-2'>&amp;</span><span class='ident'>to_print</span>);
    <span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;string returned: {}&quot;</span>, <span class='ident'>str</span>::<span class='ident'>from_utf8</span>(<span class='ident'>slice</span>).<span class='ident'>unwrap</span>());
}
</pre>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "std";
        window.playgroundUrl = "http://play.rust-lang.org/";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    <script src="../../playpen.js"></script>
    <script async src="../../search-index.js"></script>
</body>
</html>